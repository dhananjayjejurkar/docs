---
title: Understanding quotas in Azure
Redirects:
 - 01_check_resource_limits/e3
---

The following sections help you plan for quotas (service limits) and Azure Service Provider registrations required by your cluster.

[Managing service limits and constraints in Azure](01a_managing_quotas) describes how to check that your clusters meet these quotas and how to raise your resource limits, if needed.

### IP Address quota

You need to increase the limit of `Public IP Addresses - Basic` and `Public IP Addresses - Standard` for the regions where you plan to deploy your clusters with the total number of clusters you plan to use. To understand the requirements, and recommended quotas, see the following sections.

**Default quota**

The default public IP address limits for Public IP Addresses Basic and Public IP Addresses Standards is set to 10. See [Public IP address limits](https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/azure-subscription-service-limits#publicip-address) for more information.


**Recommended quota**

EDB recommends the following when requesting public IP address quota increases:

* Public IP Addresses – Basic: number of clusters you plan to deploy in a given region
* Public IP Addresses – Standard: number of clusters you plan to deploy in a given region

### vCPU quota

Any time a new VM is deployed the vCPUs for the VMs must not exceed the vCPU quota for the VM size family or the total regional vCPU quota. The VMs deployment fails if either of those quotas are exceeded. 

!!! Note
    The default number of total cores per subscription per region is 20. See [Virtual Machines limits - Azure Resource Manager](https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/azure-subscription-service-limits#virtual-machines-limits---azure-resource-manager) for more information.

In each region, EDB Cloud uses six ESv3 and six DSv2 virtual machine cores to manage your EDB Cloud infrastructure.
Your clusters deployed in the region use separate ESv3 virtual machine cores. The number of cores depends on the Instance Type and High Availability options of the clusters you provision. You can calculate the number of ESv3 cores required for your cluster based on the following:

* Virtual machine instance of type E{N}Sv3 uses {N} cores. For example, an instance of type E64Sv3 uses 64 ESv3 cores.
* Cluster running on an E{N}Sv3 instance with high availability not enabled uses exactly {N} ESv3 cores.
* Cluster running on an E{N}Sv3 instance with high availability enabled uses 3 * {N} ESv3 cores.

As an example, if you provision the largest virtual machine E64Sv3 with high availability enabled, it requires (3 * 64)=192 ESv3 cores per region. EDB Cloud infrastructure requires an additional six ESv3 and six DSv2 virtual machine cores per region.

**Recommended quota**

EDB recommends the following when requesting Virtual Machine resource quota increases:
* Total Regional vCPUs: minimum of 100+ per designated region
* Standard ESv3 Family vCPUs: minimum of 50+ per designated region
* Standard DSv2 Family vCPUs: minimum of 20+ per designated region

### Virtual Machine (SKU) quota

When you deploy your clusters in HA mode, EDB Cloud uses multiple availability zones in the region where you plan to deploy the cluster. EDB Cloud uses Standard DSv2 Family vCPUs to manage workloads and Standard ESv3 Family vCPUs to manage clusters.

**Recommended quota**

Ensure that all regions and zones designated for the deployment of your clusters have no SKU restrictions for the vCPU families used by EDB Cloud. `Standard_DS2_v2` and `Standard_E2s_v3` in zone 1,2,3 of every region designated for cluster deployment should have no restrictions.

### Azure Service Provider registrations

EDB Cloud creates and manages [certain types of Azure resources](https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/resource-providers-and-types). Ensure that the following Azure service providers have been registered in your Azure subscription. Absence of registration for any of these service providers in your Azure subscription leads to failure to create clusters in EDB Cloud.

| Provider Namespace             | Description                                                                                                         |
| ------------------------------ | --------------------------------------------------------------------------------------------------------------- |
| Microsoft.Compute              | Cluster workload needs to run on VirtualMachine (managed by Azure Kubernetes Service).                                             |
| Microsoft.ContainerService     | The management to cluster workload runs on Azure Kubernetes Service.                                  |
| Microsoft.KeyVault             | The cluster’s data volume is encrypted by keys stored in Azure KeyVault.  The credential information created to manage all the Azure resources used by EDB Cloud in the user’s Azure subscription is also stored in Azure KeyVault.  |
| Microsoft.Storage              | The cluster backups the data to Azure Service Account, the data is encrypted by the key stored in Azure KeyVault. |
| Microsoft.ManagedIdentity      | The management software access to the local Azure service by Azure Managed-Identity in apassword-less manner.     |
| Microsoft.Network              | All the management and cluster workload runs in Azure Kubernetes Service setup in the dedicated VNet.                              |
| Microsoft.OperationalInsights  | All the management and clusters workload logging (log workspace).                                          |
| Microsoft.OperationsManagement | All workloads monitoring (container insight).                                                                   |
| Microsoft.Portal               | Predefined dashboard for user to monitor the running status of the clusters (aggregated logs and metrics).    |


    